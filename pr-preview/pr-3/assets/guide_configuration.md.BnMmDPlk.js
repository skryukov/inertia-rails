import{_ as n,K as t,f as o,g as r,a5 as a,N as i}from"./chunks/framework._I0PdzNh.js";const E=JSON.parse('{"title":"Configuration","description":"","frontmatter":{},"headers":[],"relativePath":"guide/configuration.md","filePath":"guide/configuration.md"}'),l={name:"guide/configuration.md"};function p(h,e,d,c,k,g){const s=t("AvailableSince");return r(),o("div",null,[e[0]||(e[0]=a(`<h1 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">​</a></h1><p>Inertia Rails can be configured globally or in a specific controller (and subclasses).</p><h2 id="global-configuration" tabindex="-1">Global Configuration <a class="header-anchor" href="#global-configuration" aria-label="Permalink to &quot;Global Configuration&quot;">​</a></h2><p>Use the <code>InertiaRails.configure</code> method to set global configuration options. If using global configuration, we recommend you place the code inside an initializer:</p><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># config/initializers/inertia.rb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">InertiaRails</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">configure</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> do</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> |config|</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Example: force a full-reload if the deployed assets change.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ViteRuby</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">digest</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><p>The default configuration can be found <a href="https://github.com/inertiajs/inertia-rails/blob/master/lib/inertia_rails/configuration.rb#L5" target="_blank" rel="noreferrer">here</a>.</p><h2 id="local-configuration" tabindex="-1">Local Configuration <a class="header-anchor" href="#local-configuration" aria-label="Permalink to &quot;Local Configuration&quot;">​</a></h2><p>The <code>inertia_config</code> method allows you to override global settings in specific controllers. Use this method in your controllers to customize configuration for specific parts of your application:</p><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> EventsController</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ApplicationController</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  inertia_config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    version:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;events-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">#{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">InertiaRails</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ssr_enabled:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { action_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><h2 id="setting-configuration-via-environment-variables" tabindex="-1">Setting Configuration via Environment Variables <a class="header-anchor" href="#setting-configuration-via-environment-variables" aria-label="Permalink to &quot;Setting Configuration via Environment Variables&quot;">​</a></h2><p>Inertia Rails supports setting any configuration option via environment variables out of the box. For each option in the configuration, you can set an environment variable prefixed with <code>INERTIA_</code> and the option name in uppercase. For example: <code>INERTIA_SSR_ENABLED</code>.</p><p><strong>Boolean values</strong> (like <code>INERTIA_DEEP_MERGE_SHARED_DATA</code> or <code>INERTIA_SSR_ENABLED</code>) are parsed from the strings <code>&quot;true&quot;</code> or <code>&quot;false&quot;</code> (case-sensitive).</p><h2 id="configuration-options" tabindex="-1">Configuration Options <a class="header-anchor" href="#configuration-options" aria-label="Permalink to &quot;Configuration Options&quot;">​</a></h2><h3 id="component-path-resolver" tabindex="-1"><code>component_path_resolver</code> <a class="header-anchor" href="#component-path-resolver" aria-label="Permalink to &quot;\`component_path_resolver\`&quot;">​</a></h3><p><strong>Default</strong>: <code>-&gt;(path:, action:) { &quot;#{path}/#{action}&quot; }</code></p><p>Use <code>component_path_resolver</code> to customize component path resolution when <a href="#default_render"><code>default_render</code></a> config value is set to <code>true</code>. The value should be callable and will receive the <code>path</code> and <code>action</code> parameters, returning a string component path. See <a href="/guide/responses#automatically-determine-component-name">Automatically determine component name</a>.</p><h3 id="prop-transformer" tabindex="-1"><code>prop_transformer</code> <a class="header-anchor" href="#prop-transformer" aria-label="Permalink to &quot;\`prop_transformer\`&quot;">​</a></h3><p><strong>Default</strong>: <code>-&gt;(props:) { props }</code></p><p>Use <code>prop_transformer</code> to apply a transformation to your props before they&#39;re sent to the view. One use-case this enables is to work with <code>snake_case</code> props within Rails while working with <code>camelCase</code> in your view:</p><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  inertia_config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    prop_transformer:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> lambda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> do</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> |props:|</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      props.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deep_transform_keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { |key| key.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">to_s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">camelize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:lower</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span></code></pre></div><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>This controls the props provided by Inertia Rails but does not concern itself with props coming <em>into</em> Rails. You may want to add a global <code>before_action</code> to <code>ApplicationController</code>:</p></div><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">before_action </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:underscore_params</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> underscore_params</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  params.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deep_transform_keys!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { |key| key.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">to_s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">underscore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><h3 id="deep-merge-shared-data" tabindex="-1"><code>deep_merge_shared_data</code> <a class="header-anchor" href="#deep-merge-shared-data" aria-label="Permalink to &quot;\`deep_merge_shared_data\`&quot;">​</a></h3><p><strong>Default</strong>: <code>false</code><strong>ENV</strong>: <code>INERTIA_DEEP_MERGE_SHARED_DATA</code></p>`,24)),i(s,{rails:"3.8.0"}),e[1]||(e[1]=a('<p>When enabled, props will be deep merged with shared data, combining hashes with the same keys instead of replacing them.</p><h3 id="default-render" tabindex="-1"><code>default_render</code> <a class="header-anchor" href="#default-render" aria-label="Permalink to &quot;`default_render`&quot;">​</a></h3><p><strong>Default</strong>: <code>false</code><strong>ENV</strong>: <code>INERTIA_DEFAULT_RENDER</code></p><p>Overrides Rails default rendering behavior to render using Inertia by default.</p><h3 id="encrypt-history" tabindex="-1"><code>encrypt_history</code> <a class="header-anchor" href="#encrypt-history" aria-label="Permalink to &quot;`encrypt_history`&quot;">​</a></h3><p><strong>Default</strong>: <code>false</code><strong>ENV</strong>: <code>INERTIA_ENCRYPT_HISTORY</code></p>',6)),i(s,{rails:"3.7.0",core:"2.0.0"}),e[2]||(e[2]=a('<p>When enabled, you instruct Inertia to encrypt your app&#39;s history, it uses the browser&#39;s built-in <a href="https://developer.mozilla.org/en-US/docs/Web/API/Crypto" target="_blank" rel="noreferrer"><code>crypto</code> api</a> to encrypt the current page&#39;s data before pushing it to the history state.</p><h3 id="ssr-enabled-experimental" tabindex="-1"><code>ssr_enabled</code> <em>(experimental)</em> <a class="header-anchor" href="#ssr-enabled-experimental" aria-label="Permalink to &quot;`ssr_enabled` _(experimental)_&quot;">​</a></h3><p><strong>Default</strong>: <code>false</code><strong>ENV</strong>: <code>INERTIA_SSR_ENABLED</code></p>',3)),i(s,{rails:"3.6.0",core:"2.0.0"}),e[3]||(e[3]=a('<p>Whether to use a JavaScript server to pre-render your JavaScript pages, allowing your visitors to receive fully rendered HTML when they first visit your application.</p><p>Requires a JavaScript server to be available at <code>ssr_url</code>. <a href="https://github.com/ElMassimo/inertia-rails-ssr-template" target="_blank" rel="noreferrer"><em>Example</em></a></p><h3 id="ssr-url-experimental" tabindex="-1"><code>ssr_url</code> <em>(experimental)</em> <a class="header-anchor" href="#ssr-url-experimental" aria-label="Permalink to &quot;`ssr_url` _(experimental)_&quot;">​</a></h3><p><strong>Default</strong>: <code>&quot;http://localhost:13714&quot;</code><strong>ENV</strong>: <code>INERTIA_SSR_URL</code></p><p>The URL of the JS server that will pre-render the app using the specified component and props.</p><h3 id="version-recommended" tabindex="-1"><code>version</code> <em>(recommended)</em> <a class="header-anchor" href="#version-recommended" aria-label="Permalink to &quot;`version` _(recommended)_&quot;">​</a></h3><p><strong>Default</strong>: <code>nil</code><strong>ENV</strong>: <code>INERTIA_VERSION</code></p><p>This allows Inertia to detect if the app running in the client is oudated, forcing a full page visit instead of an XHR visit on the next request.</p><p>See <a href="/guide/asset-versioning">assets versioning</a>.</p><h3 id="always-include-errors-hash" tabindex="-1"><code>always_include_errors_hash</code> <a class="header-anchor" href="#always-include-errors-hash" aria-label="Permalink to &quot;`always_include_errors_hash`&quot;">​</a></h3><p><strong>Default</strong>: <code>nil</code><strong>ENV</strong>: <code>INERTIA_ALWAYS_INCLUDE_ERRORS_HASH</code></p>',11)),i(s,{rails:"3.11.0"}),e[4]||(e[4]=a('<p>Whether to include an empty <code>errors</code> hash in the props when no validation errors are present.</p><p>When set to <code>true</code>, an empty <code>errors: {}</code> object will always be included in Inertia responses. When set to <code>false</code>, the <code>errors</code> key will be omitted when there are no errors. The default value <code>nil</code> currently behaves like <code>false</code> but shows a deprecation warning.</p><p>The default value will be changed to <code>true</code> in the next major version.</p><h3 id="parent-controller" tabindex="-1"><code>parent_controller</code> <a class="header-anchor" href="#parent-controller" aria-label="Permalink to &quot;`parent_controller`&quot;">​</a></h3><p><strong>Default</strong>: <code>&#39;::ApplicationController&#39;</code><strong>ENV</strong>: <code>INERTIA_PARENT_CONTROLLER</code></p><p>Specifies the base controller class for the internal <code>StaticController</code> used to render <a href="/guide/routing#shorthand-routes">Shorthand routes</a>.</p><p>By default, Inertia Rails creates a <code>StaticController</code> that inherits from <code>ApplicationController</code>. You can use this option to specify a different base controller (for example, to include custom authentication, layout, or before actions).</p>',7))])}const _=n(l,[["render",p]]);export{E as __pageData,_ as default};
